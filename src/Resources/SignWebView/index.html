<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SignWebView</title>

</head>

<body>
    <div>
        <div id="captcha-box"></div>
    </div>
    <script>
        async function TrySetTheme(){
            try {
                const bl = await chrome.webview.hostObjects.dialog.IsDarkTheme();
                document.body.classList.add(bl === true ? "awe_appDarkMode" : "awe_appLightMode");
            } catch (error) {
                alert(error);
            }
        }
        const app = {
            requestCaptchaDataUrl: 'https://tac.8i.ink/gen',
            validCaptchaUrl: 'https://tac.8i.ink/check',
            bindEl: '#captcha-box',
            chainString: 'cl>json>rsaaes>base64',
            customParentClass: 'tianai-custom-parent',
            
            validSuccess: (result, c, t) => {
                // 销毁
                chrome.webview.hostObjects.dialog.CodeFallback(result.data.token)
            },
        };
        var vid = setInterval(function(){
            if(window["TAC"] !== undefined){
                clearInterval(vid);
                var va = new window.TAC(app);
                va.init();
                TrySetTheme();
            }
        },250);
        //window.TAC(config).init();
    </script>
    <script src="https://cdn.bootcdn.net/ajax/libs/jsencrypt/3.3.2/jsencrypt.min.js"></script>
    <!-- <script src="https://cdn.bootcdn.net/ajax/libs/crypto-js/4.1.1/core.min.js"></script> -->
    <script src="https://cdn.bootcdn.net/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script src="./tianai/tac.min.js"></script>
    <script src="./tianai/enc.js"></script>
    <link rel="stylesheet" href="./tianai/styles/tac-custom.css">
    <link rel="stylesheet" href="./tianai/styles/tac.css">
</body>

</html>